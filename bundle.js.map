{
  "version": 3,
  "sources": [
    "../Users/cheahshen/AppData/Roaming/npm/node_modules/ksana-cli/node_modules/browserify/node_modules/browser-pack/_prelude.js",
    "node_modules/ksana-selectable-richtext/breakmarkup.js",
    "node_modules/ksana-selectable-richtext/deferlistview.js",
    "node_modules/ksana-selectable-richtext/deferlistview_web.js",
    "node_modules/ksana-selectable-richtext/index.js",
    "node_modules/ksana-selectable-richtext/infinitescroller.js",
    "node_modules/ksana-selectable-richtext/paragraph.js",
    "node_modules/ksana-selectable-richtext/paragraph_web.js",
    "node_modules/ksana-selectable-richtext/sampledata/markups.js",
    "node_modules/ksana-selectable-richtext/sampledata/text.js",
    "node_modules/ksana-selectable-richtext/sampledata/typedef_web.js",
    "node_modules/ksana-selectable-richtext/tokenizer.js",
    "node_modules/ksana-selectable-richtext/tokens.js",
    "node_modules/ksana2015-webruntime/downloader.js",
    "node_modules/ksana2015-webruntime/html5fs.js",
    "node_modules/ksana2015-webruntime/ksanagap.js",
    "node_modules/ksana2015-webruntime/livereload.js",
    "node_modules/ksana2015-webruntime/mkdirp.js",
    "selectable-richtext-test/index.js",
    "selectable-richtext-test/src/main.jsx",
    "selectable-richtext-test/src/markupmenu.js",
    "selectable-richtext-test/src/selectable_richtext_test.js"
  ],
  "names": [],
  "mappings": "AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC3GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC7PA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})",
    "/* break markup into renderable sections*/\n/*\n\ninput : paragraph , markups (absolute position, start from this paragraph)\n        selectable\n        \tif selectable, sections are break up into tokens\n\noutput: renderable tokens \n          renderable:\n          \ttext\n          \toffset //offset in paragraph text\n\t\t\tmarkup //markup covering this token\n*/\n\nvar buildInvertedMarkup=function(markups){\n\tvar markupstart={},markupend={};\n\tfor (var mid in markups) {\n\t\tvar m=markups[mid];\n\t\tif (!markupstart[m.s]) markupstart[m.s]=[];\n\t\tmarkupstart[m.s].push(mid);\n\t\tif (!markupend[m.s+m.l]) markupend[m.s+m.l]=[];\n\t\tmarkupend[m.s+m.l].push(mid);\n\t}\n\treturn {markupstart:markupstart,markupend:markupend};\n}\nvar _break=function(text,ms,me){\n\tvar M=new Set();\n\tvar tokens=[], tokenOffsets=[], tokenMarkups=[], lasttext=\"\", lastoffset=0;\n\tfor (var i=0;i<text.length;i+=1) {\n\n\t\tif (i && (ms[i] || me[i])) { // markup changed\n\t\t\ttokens.push(lasttext);\n\t\t\ttokenOffsets.push(lastoffset);\n\t\t\ttokenMarkups.push(Array.from(M));\n\t\t\tlasttext=\"\";\n\t\t\tlastoffset=i;\n\t\t}\n\t\tms[i]&&\tms[i].map(function(m){M.add(m)});\n\t\tme[i]&&\tme[i].map(function(m){M.delete(m)});\n\t\t\t\t\n\t\tlasttext+=text[i];\n\t}\n\ttokens.push(lasttext);\n\ttokenOffsets.push(lastoffset);\n\ttokenMarkups.push(Array.from(M));\n\n\treturn {tokens:tokens,tokenOffsets:tokenOffsets,tokenMarkups:tokenMarkups};\n}\nvar shredding=function(para,tokenizer){\n\tvar tokens=[],tokenOffsets=[],tokenMarkups=[];\n\tfor (var i=0;i<para.tokens.length;i+=1) {\n\t\tvar t=para.tokens[i];\n\t\tvar r=tokenizer(t);\n\t\tif (r.tokens[0]===t) {\n\t\t\ttokens.push(para.tokens[i]);\n\t\t\toffsets.push(para.tokenOffsets[i]);\n\t\t\tmarkups.push(para.tokenMarkups[i]);\n\t\t} else {\n\t\t\tfor(var j=0;j<r.tokens.length;j+=1) {\n\t\t\t\ttokens.push(r.tokens[j]);\n\t\t\t\ttokenOffsets.push(para.tokenOffsets[i]+r.tokenOffsets[j]);\n\t\t\t\ttokenMarkups.push(para.tokenMarkups[i]);\n\t\t\t}\n\t\t}\n\t}\n\treturn {tokens:tokens,offsets:offsets,markups:markups};\n}\nvar breakmarkup=function(tokenizer,text,markups,shred){\n\tif (!text) return {tokens:[],tokenMarkups:[],tokenOffsets:[]};\n\tif (!markups || Object.keys(markups).length==0) {\n\t\treturn shred?tokenizer(text):{tokens:[text], tokenMarkups:[0],tokenOffsets:[]};\n\t} else {\n\t\tvar r=buildInvertedMarkup(markups);\n\t\tvar out= _break(text,r.markupstart,r.markupend);\n\t\tif (!shred)return out;\n\t\treturn shredding(out,tokenizer);\n\t}\n}\nmodule.exports=breakmarkup;",
    "/* Defer loading List View for React Native*/\n\nvar React=require(\"react-native\");\nvar {\n  View,Text,Image,ListView,StyleSheet,TouchableHighlight,PropTypes\n} =React;\nvar E=React.createElement;\n/*\n cloneWithRows , the array passed must be changed too (assume immutable array) \n\n optimal row count <2000\n\n text will be fetched if needed when a row become visible \n*/\nvar DeferListView=React.createClass({\n\tpropTypes:{\n\t\trows:PropTypes.array.isRequired, \n\t\tonFetchText:PropTypes.func,\n\t\trenderRow:PropTypes.func,\n\t\tvisibleChanged:PropTypes.func,\n\t\tstyle:PropTypes.object\n\t}\n\t,rowY:{}\n\t,rows:{}\n\t,getDefaultProps:function(){\n\t\treturn {\n\t\t\tonFetchText: function(row,cb){\n\t\t\t\tcb(0,this.props.rows[row].text,row);\n\t\t\t},\n\t\t\trenderRow:function(rowData,row){\n\t\t\t\treturn React.createElement(Text,null,rowData.text?row+rowData.text:row);\n\t\t\t}\n\t\t}\n\t}\n\t,getInitialState:function(){\n\t\tthis.rows=this.props.rows.slice();\n\t\tvar ds=new ListView.DataSource({rowHasChanged:this.rowHasChanged});\n\t\treturn {dataSource: ds.cloneWithRows(this.getRows({}))};\n\t}\n\t,rowHasChanged:(r1,r2)=>r1!==r2\n\t,getRows:function(loaded){\n\t\tvar out=[];\n\t\tfor (var i=0;i<this.rows.length;i++) {\n\t\t\tif (loaded[i]) {\n\t\t\t\tvar r=JSON.parse(JSON.stringify(this.rows[i]));\n\t\t\t\tr.text=loaded[i];\n\t\t\t\tout.push(r);\n\t\t\t\tthis.rows[i]=r;\n\t\t\t} else{\n\t\t\t\tout.push( this.rows[i] );\n\t\t\t}\n\t\t\t\n\t\t}\n\t\treturn out;\n\t}\n\t,fetchTexts:function(tofetch){\n\t\tvar taskqueue=[],loaded={};\n\n\t\tvar task=function(row) {\n\t\t\ttaskqueue.push(function(err,data,retrow){\n\t\t\t\tif (!err&& data){\n\t\t\t\t\tif (!data.empty) {\n\t\t\t\t\t\tloaded[retrow]=data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.props.onFetchText.call(this,row,taskqueue.shift(0,data));\n\t\t\t}.bind(this));\n\t\t}.bind(this);\n\n\t\ttofetch.forEach(task);\n\t\ttaskqueue.push(function(err,data,retrow){\n\t\t\tloaded[retrow]=data;\n\t\t\tsetTimeout(function(){\n\t\t\t\tthis.updateText(loaded);\n\t\t\t}.bind(this),100);\n\t\t\t\n\t\t}.bind(this));\n\t\ttaskqueue.shift()(0,{empty:true});\n\t}\n\t,updateText:function(loaded){\n\t\tvar rows=this.getRows(loaded);\n\t\tvar ds=this.state.dataSource.cloneWithRows(rows);\n\t\tthis.setState({dataSource:ds,rows:rows},function(){\n\t\t\tif (this.scrollingTo) {\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tthis.refs.list.scrollTo( this.rowY[this.scrollingTo],0);\n\t\t\t\t\tthis.scrollingTo=null;\n\t\t\t\t}.bind(this),800); //wait until layout complete\n\t\t\t}\n\t\t}.bind(this));\t\t\n\t}\n\t,onChangeVisibleRows:function(visibleRows){\n\t\tvar loading=0,tofetch=[],visibles=[],rows=this.props.rows;\n\t\tfor (row in visibleRows.s1) {\n\t\t\tif (!rows[row].text) {\n\t\t\t\ttofetch.push(row);\n\t\t\t\tloading++;\n\t\t\t}\n\t\t\tvisibles.push(parseInt(row));\n\t\t}\n\t\tif (!loading) return;\n\t\tthis.fetchTexts(tofetch);\n\n\t\tclearTimeout(this.visibletimer)\n\t\tthis.visibletimer=setTimeout(function(){\n\t\t\tthis.props.visibleChanged&&this.props.visibleChanged(visibles[0],visibles[visibles.length-1]);\n\t\t}.bind(this),1000);\n\t}\n\t,onRowLayout:function(rowid,evt){\n\t\tthis.rowY[rowid]=evt.nativeEvent.layout.y;\n\t}\n\t,renderRow:function(rowData,sectionId,rowId,highlightRow){\t\n\t\treturn E(View ,{ref:\"para\"+rowId,style:{overflow:'hidden'}\n\t\t ,onLayout:this.onRowLayout.bind(this,rowId)}\n\t\t ,this.props.renderRow(rowData,rowId,highlightRow));\n\t}\n\t,scrollToRow:function(row){\n\t\tvar y=this.rowY[row];\n\t\tif (y) {\n\t\t\tthis.refs.list.scrollTo( y,0);\n\t\t\tthis.scrollingTo=row;//when layout completed scroll again\n\t\t}\n\t}\n\t,render:function(){\n\t\treturn E(View,{style:{flex:1}},\n\t\tE(ListView,{ref:\"list\",style:[this.props.style,{overflow:'hidden'}],\n\t\t dataSource:this.state.dataSource \n\t\t ,renderRow:this.renderRow, onChangeVisibleRows:this.onChangeVisibleRows\n\t\t ,pageSize:30,initialListSize:1}));\n\t}\n});\n\nmodule.exports=DeferListView;",
    "var React=require(\"react\");\r\nvar E=React.createElement;\r\n\r\nvar InfiniteScroller=require(\"./infinitescroller\");\r\n\r\nvar DeferListView=React.createClass({\r\n\tgetDefaultProps:function(){\r\n\t\treturn {rows:[]};\r\n\t}\r\n\t,renderRow:function(row) {\r\n\t\treturn this.props.renderRow(this.props.rows[row],row);\r\n\t}\r\n\t,render:function(){\r\n\t\treturn E(InfiniteScroller,\r\n\t\t\t{averageElementHeight:20\r\n\t\t\t,containerHeight:this.props.height||600\r\n\t\t\t,renderRow:this.renderRow\r\n\t\t\t,totalNumberOfRows:this.props.rows.length});\r\n\t}\r\n});\r\n\r\n\r\nmodule.exports=DeferListView;",
    "var React,Paragraph,ListView,View;\n\ntry{\n\tReact=require(\"react-native\");\t\n\tListView=require(\"./deferlistview\");\n\tParagraph=require(\"./paragraph\");\n\tView=View;\n} catch(e) {\n\tReact=require(\"react\");\n\tListView=require(\"./deferlistview_web\");\n\tParagraph=require(\"./paragraph_web\");\n\tView=\"div\";\n}\nvar E=React.createElement;\nvar rowY={};\n\n\nvar SelectableRichText=React.createClass({\n\tgetInitialState:function(){\n\t\treturn {paraStart:-1,paraEnd:-1,token:null};\n\t}\n\t,getSelection:function(){\n\t\treturn {paraStart:this.state.paraStart,paraEnd:this.state.paraEnd,selStart:this.selStart,selEnd:this.selEnd};\n\t}\t\n\t,selStart:-1\n\t,selEnd:-1\n\t,componentWillUnmount:function(){\n\t}\n\t,onSelectionChanged:function(selStart,selEnd,lastStart,lastEnd) {\n\t\tthis.selStart=selStart;\n\t\tthis.selEnd=selEnd;\n\t}\n\t,onTouchEnd:function(n,evt) {\n\t\tvar touches=evt.nativeEvent.touches;\n\t\tvar cTouches=evt.nativeEvent.changedTouches;\n\t\tif (cTouches.length===1 && touches.length===1){ //another finger is pressing\n\t\t\tthis.setState({paraEnd:n});\n\t\t}\n\t}\n\t,onTouchStart:function(n,evt){\n\t\tvar touches=evt.nativeEvent.touches;\n\t\tif (touches.length===1) {\n\t\t\tif (this.state.paraStart===-1) {\n\t\t\t\tthis.setState({paraStart:n,paraEnd:n});\n\t\t\t} else if (!this.isSelected(n)){\n\t\t\t\tthis.setState({paraStart:-1,paraEnd:-1});\n\t\t\t}\n\t\t}\t\n\t}\n\t,isSelected:function(n){\n\t\tvar start=this.state.paraStart;\n\t\tvar end=this.state.paraEnd;\n\t\tif (end<start &&end>-1) {\n\t\t\tvar t=end;\n\t\t\tend=start;\n\t\t\tstart=t;\n\t\t}\n\t\treturn (n>=start)&&(n<=end);\n\t}\n\t,cancelSelection:function(){\n\t\tthis.selStart=-1;\n\t\tthis.selEnd=-1;\n\t\tthis.setState({paraStart:-1,paraEnd:-1});\n\t}\n\t,trimSelection:function(para,start) {\n\t\tif (this.state.paraStart===-1)return;\n\t\tif (start) {\n\t\t\tthis.setState({paraStart:para});\n\t\t} else {\n\t\t\tthis.setState({paraEnd:para});\n\t\t}\n\t}\n\t,visibleChanged:function(start,end){\n\t\tif (this.state.paraStart>end || start>this.state.paraEnd) {\n\t\t\tthis.cancelSelection();\n\t\t}\n\t}\n\t,getSentenceMarkup:function(sid){\n\t\treturn this.props.markups[sid];\n\t}\n\t,markLeft:function(){\n\t\tif (this.state.paraStart===-1) return;\n\t\t//this.eventEmitter.emit('adjustSelection',-1);\n\t}\n\t,markRight:function(){\n\t\tif (this.state.paraEnd===-1) return;\n\t\t//this.eventEmitter.emit('adjustSelection',1);\n\t}\n\t,fetchText:function(row,cb){\n\t\tif (this.props.rows[row].text) return false;\n\t\tthis.props.onFetchText(row,cb);\n\t}\n\t,renderRow:function(rowdata,row){\n\t\tvar text=rowdata.text,idx=parseInt(row);\n\t\t\treturn E(View, {style:this.props.style,key:idx},\n\t\t\t\tE(Paragraph, \n\t\t\t\t{para:idx, text:text \n\t\t\t\t,onTouchStart:this.onTouchStart.bind(this,idx)\n\t\t\t\t,onTouchEnd:this.onTouchEnd.bind(this,idx)\n\t\t\t\t,onHyperlink:this.props.onHyperlink\n\t\t\t\t,onSelectionChanged:this.onSelectionChanged\n\t\t\t\t,token:this.state.token\n\t\t\t\t,typedef:this.props.typedef\n\t\t\t\t,markups:this.getSentenceMarkup(idx)\n\t\t\t\t,selectedStyle:this.props.selectedStyle\n\t\t\t\t,textStyle:this.props.textStyle\n\t\t\t\t,selectedTextStyle:this.props.selectedTextStyle\n\t\t\t\t,selectToken:this.selectToken\n\t\t\t\t,paraStart:this.state.paraStart\n\t\t\t\t,paraEnd:this.state.paraEnd\n\t\t\t\t,trimSelection:this.trimSelection\n\t\t\t\t,eventEmitter:this.eventEmitter\n\t\t\t\t,fetchText:this.fetchText\n\t\t\t\t,cancelSelection:this.cancelSelection}\n\t\t\t\t)\n\t\t\t);\n\t}\n\t,render:function(){\n\t\tvar props={};\n\t\tfor (var i in this.props)\tprops[i]=this.props[i];\n\t\tprops.ref=\"listview\";\n\t\tprops.visibleChanged=this.visibleChanged;\n\t\tprops.renderRow=this.renderRow;\n\n\t\treturn E(ListView,props);\n\t}\n});\n\n\n\nmodule.exports={SelectableRichText:SelectableRichText,DeferListView:ListView};",
    "/* from https://github.com/tnrich/react-variable-height-infinite-scroller/blob/master/index.js */\r\n\r\n/* remove dependecies */\r\n'use strict';\r\nvar React = require('react');\r\nvar ReactDOM = require('react-dom');\r\nvar validateIoNonnegativeIntegerArray = function(arr){\r\n  for (var i=0;i<arr;i++) if (arr[i]<0) return false;\r\n  return arr;\r\n}\r\n\r\nfunction noop() {}\r\n\r\nvar InfiniteScoller = React.createClass({\r\n  displayName: 'InfiniteScoller',\r\n\r\n  propTypes: {\r\n    averageElementHeight: React.PropTypes.number,\r\n    containerHeight: React.PropTypes.number.isRequired,\r\n    totalNumberOfRows: React.PropTypes.number.isRequired,\r\n    renderRow: React.PropTypes.func.isRequired,\r\n    rowToJumpTo: React.PropTypes.shape({\r\n      row: React.PropTypes.number\r\n    }),\r\n    jumpToBottomOfRow: React.PropTypes.bool,\r\n    containerClassName: React.PropTypes.string,\r\n    onScroll: React.PropTypes.func\r\n  },\r\n\r\n  getDefaultProps: function getDefaultProps() {\r\n    return {\r\n      onScroll: noop,\r\n      containerClassName: 'infiniteContainer',\r\n      averageElementHeight: 100\r\n    };\r\n  },\r\n\r\n  onEditorScroll: function onEditorScroll(event) {\r\n    // tnr: we should maybe keep this implemented..\r\n    if (this.adjustmentScroll) {\r\n      // adjustment scrolls are called in componentDidUpdate where we manually set the scrollTop (which inadvertantly triggers a scroll)\r\n      this.adjustmentScroll = false;\r\n      return;\r\n    }\r\n\r\n    var infiniteContainer = event.currentTarget;\r\n    var visibleRowsContainer = ReactDOM.findDOMNode(this.refs.visibleRowsContainer);\r\n\r\n    // const currentAverageElementHeight = (visibleRowsContainer.getBoundingClientRect().height / this.state.visibleRows.length);\r\n    this.oldRowStart = this.rowStart;\r\n    var distanceFromTopOfVisibleRows = infiniteContainer.getBoundingClientRect().top - visibleRowsContainer.getBoundingClientRect().top;\r\n    var distanceFromBottomOfVisibleRows = visibleRowsContainer.getBoundingClientRect().bottom - infiniteContainer.getBoundingClientRect().bottom;\r\n    var newRowStart = undefined;\r\n    var rowsToAdd = undefined;\r\n    if (distanceFromTopOfVisibleRows < 0) {\r\n      if (this.rowStart > 0) {\r\n        rowsToAdd = Math.ceil(-1 * distanceFromTopOfVisibleRows / this.props.averageElementHeight);\r\n        newRowStart = this.rowStart - rowsToAdd;\r\n\r\n        if (newRowStart < 0) {\r\n          newRowStart = 0;\r\n        }\r\n\r\n        this.prepareVisibleRows(newRowStart, this.state.visibleRows.length);\r\n      }\r\n    } else if (distanceFromBottomOfVisibleRows < 0) {\r\n      // scrolling down, so add a row below\r\n      var rowsToGiveOnBottom = this.props.totalNumberOfRows - 1 - this.rowEnd;\r\n      if (rowsToGiveOnBottom > 0) {\r\n        rowsToAdd = Math.ceil(-1 * distanceFromBottomOfVisibleRows / this.props.averageElementHeight);\r\n        newRowStart = this.rowStart + rowsToAdd;\r\n\r\n        if (newRowStart + this.state.visibleRows.length >= this.props.totalNumberOfRows) {\r\n          // the new row start is too high, so we instead just append the max rowsToGiveOnBottom to our current preloadRowStart\r\n          newRowStart = this.rowStart + rowsToGiveOnBottom;\r\n        }\r\n        this.prepareVisibleRows(newRowStart, this.state.visibleRows.length);\r\n      }\r\n    } else {// eslint-disable-line no-empty\r\n      // we haven't scrolled enough, so do nothing\r\n    }\r\n    this.updateTriggeredByScroll = true;\r\n    this.props.onScroll(event);\r\n    // set the averageElementHeight to the currentAverageElementHeight\r\n    // setAverageRowHeight(currentAverageElementHeight);\r\n  },\r\n\r\n  componentWillReceiveProps: function componentWillReceiveProps(nextProps) {\r\n    var newNumberOfRowsToDisplay = this.state.visibleRows.length;\r\n    if (nextProps.rowToJumpTo && this.props.rowToJumpTo !== nextProps.rowToJumpTo) {\r\n      this.prepareVisibleRows(nextProps.rowToJumpTo.row, newNumberOfRowsToDisplay);\r\n      this.rowJumpTriggered = true;\r\n      this.rowJumpedTo = nextProps.rowToJumpTo.row;\r\n    } else {\r\n      var rowStart = this.rowStart;\r\n      // we need to set the new totalNumber of rows prop here before calling prepare visible rows\r\n      // so that prepare visible rows knows how many rows it has to work with\r\n      this.prepareVisibleRows(rowStart, newNumberOfRowsToDisplay, nextProps.totalNumberOfRows);\r\n    }\r\n  },\r\n\r\n  componentWillUpdate: function componentWillUpdate() {\r\n    var visibleRowsContainer = ReactDOM.findDOMNode(this.refs.visibleRowsContainer);\r\n    this.soonToBeRemovedRowElementHeights = 0;\r\n    this.numberOfRowsAddedToTop = 0;\r\n    if (this.updateTriggeredByScroll === true) {\r\n      this.updateTriggeredByScroll = false;\r\n      var rowStartDifference = this.oldRowStart - this.rowStart;\r\n      if (rowStartDifference < 0) {\r\n        // scrolling down\r\n        for (var i = 0; i < -rowStartDifference; i++) {\r\n          var soonToBeRemovedRowElement = visibleRowsContainer.children[i];\r\n          if (soonToBeRemovedRowElement) {\r\n            var height = soonToBeRemovedRowElement.getBoundingClientRect().height;\r\n            // console.log('height', height);\r\n            this.soonToBeRemovedRowElementHeights += this.props.averageElementHeight - height;\r\n            // this.soonToBeRemovedRowElementHeights.push(soonToBeRemovedRowElement.getBoundingClientRect().height);\r\n          }\r\n        }\r\n      } else if (rowStartDifference > 0) {\r\n          // console.log('rowStartDifference', rowStartDifference);\r\n          this.numberOfRowsAddedToTop = rowStartDifference;\r\n        }\r\n    }\r\n  },\r\n\r\n  componentDidUpdate: function componentDidUpdate() {\r\n    // strategy: as we scroll, we're losing or gaining rows from the top and replacing them with rows of the \"averageRowHeight\"\r\n    // thus we need to adjust the scrollTop positioning of the infinite container so that the UI doesn't jump as we\r\n    // make the replacements\r\n    var infiniteContainer = ReactDOM.findDOMNode(this.refs.infiniteContainer);\r\n    var visibleRowsContainer = ReactDOM.findDOMNode(this.refs.visibleRowsContainer);\r\n    if (this.soonToBeRemovedRowElementHeights) {\r\n      infiniteContainer.scrollTop = infiniteContainer.scrollTop + this.soonToBeRemovedRowElementHeights;\r\n    }\r\n    if (this.numberOfRowsAddedToTop) {\r\n      // we're adding rows to the top, so we're going from 100's to random heights, so we'll calculate the differenece\r\n      // and adjust the infiniteContainer.scrollTop by it\r\n      var adjustmentScroll = 0;\r\n\r\n      for (var i = 0; i < this.numberOfRowsAddedToTop; i++) {\r\n        var justAddedElement = visibleRowsContainer.children[i];\r\n        if (justAddedElement) {\r\n          adjustmentScroll += this.props.averageElementHeight - justAddedElement.getBoundingClientRect().height;\r\n        }\r\n      }\r\n      infiniteContainer.scrollTop = infiniteContainer.scrollTop - adjustmentScroll;\r\n    }\r\n\r\n    if (!visibleRowsContainer.childNodes[0]) {\r\n      if (this.props.totalNumberOfRows) {\r\n        // we've probably made it here because a bunch of rows have been removed all at once\r\n        // and the visible rows isn't mapping to the row data, so we need to shift the visible rows\r\n        var numberOfRowsToDisplay = this.numberOfRowsToDisplay || 4;\r\n        var newRowStart = this.props.totalNumberOfRows - numberOfRowsToDisplay;\r\n        if (!validateIoNonnegativeIntegerArray2([newRowStart])) {\r\n          newRowStart = 0;\r\n        }\r\n        this.prepareVisibleRows(newRowStart, numberOfRowsToDisplay);\r\n        return; // return early because we need to recompute the visible rows\r\n      }\r\n      throw new Error('no visible rows!!');\r\n    }\r\n    var adjustInfiniteContainerByThisAmount = undefined;\r\n    function adjustScrollHeightToRowJump() {\r\n      this.rowJumpTriggered = false;\r\n      var icbr = infiniteContainer.getBoundingClientRect();\r\n      var vrbr = visibleRowsContainer.children[this.state.visibleRows.indexOf(this.rowJumpedTo)].getBoundingClientRect();\r\n      // if a rowJump has been triggered, we need to adjust the row to sit at the top of the infinite container\r\n      if (this.props.jumpToBottomOfRow) {\r\n        adjustInfiniteContainerByThisAmount = icbr.bottom - vrbr.bottom;\r\n      } else {\r\n        adjustInfiniteContainerByThisAmount = icbr.top - vrbr.top;\r\n      }\r\n      infiniteContainer.scrollTop = infiniteContainer.scrollTop - adjustInfiniteContainerByThisAmount;\r\n    }\r\n    // check if the visible rows fill up the viewport\r\n    // tnrtodo: maybe put logic in here to reshrink the number of rows to display... maybe...\r\n    if (visibleRowsContainer.getBoundingClientRect().height / 2 <= this.props.containerHeight) {\r\n      // visible rows don't yet fill up the viewport, so we need to add rows\r\n      if (this.rowStart + this.state.visibleRows.length < this.props.totalNumberOfRows) {\r\n        // load another row to the bottom\r\n        this.prepareVisibleRows(this.rowStart, this.state.visibleRows.length + 1);\r\n      } else {\r\n        // there aren't more rows that we can load at the bottom\r\n        if (this.rowStart - 1 > 0) {\r\n          // so we load more at the top\r\n          this.prepareVisibleRows(this.rowStart - 1, this.state.visibleRows.length + 1); // don't want to just shift view\r\n        } else {\r\n            // all the rows are already visible\r\n            if (this.rowJumpTriggered) {\r\n              adjustScrollHeightToRowJump.call(this);\r\n            }\r\n          }\r\n      }\r\n    } else if (this.rowJumpTriggered) {\r\n      adjustScrollHeightToRowJump.call(this);\r\n    } else if (visibleRowsContainer.getBoundingClientRect().top > infiniteContainer.getBoundingClientRect().top) {\r\n      // scroll to align the tops of the boxes\r\n      adjustInfiniteContainerByThisAmount = visibleRowsContainer.getBoundingClientRect().top - infiniteContainer.getBoundingClientRect().top;\r\n      // console.log('!@#!@#!@#!@#!@#!@#!@#adjustInfiniteContainerByThisAmountTop: '+adjustInfiniteContainerByThisAmount)\r\n      // this.adjustmentScroll = true;\r\n      infiniteContainer.scrollTop = infiniteContainer.scrollTop + adjustInfiniteContainerByThisAmount;\r\n    } else if (visibleRowsContainer.getBoundingClientRect().bottom < infiniteContainer.getBoundingClientRect().bottom) {\r\n      // scroll to align the bottoms of the boxes\r\n      adjustInfiniteContainerByThisAmount = visibleRowsContainer.getBoundingClientRect().bottom - infiniteContainer.getBoundingClientRect().bottom;\r\n      // console.log('!@#!@#!@#!@#!@#!@#!@#adjustInfiniteContainerByThisAmountBottom: '+adjustInfiniteContainerByThisAmount)\r\n      // this.adjustmentScroll = true;\r\n      infiniteContainer.scrollTop = infiniteContainer.scrollTop + adjustInfiniteContainerByThisAmount;\r\n    }\r\n  },\r\n\r\n  componentWillMount: function componentWillMount() {\r\n    var newRowStart = 0;\r\n    if (this.props.rowToJumpTo && this.props.rowToJumpTo.row && this.props.rowToJumpTo.row < this.props.totalNumberOfRows) {\r\n      newRowStart = this.props.rowToJumpTo.row;\r\n      this.rowJumpTriggered = true;\r\n      this.rowJumpedTo = this.props.rowToJumpTo.row;\r\n    }\r\n    this.prepareVisibleRows(newRowStart, 4);\r\n  },\r\n\r\n  componentDidMount: function componentDidMount() {\r\n    // call componentDidUpdate so that the scroll position will be adjusted properly\r\n    // (we may load a random row in the middle of the sequence and not have the infinte container scrolled properly\r\n    // initially, so we scroll to show the rowContainer)\r\n    this.componentDidUpdate();\r\n  },\r\n\r\n  prepareVisibleRows: function prepareVisibleRows(rowStart, newNumberOfRowsToDisplay, newTotalNumberOfRows) {\r\n    // note, rowEnd is optional\r\n    this.numberOfRowsToDisplay = newNumberOfRowsToDisplay;\r\n    var totalNumberOfRows = validateIoNonnegativeIntegerArray([newTotalNumberOfRows]) ? newTotalNumberOfRows : this.props.totalNumberOfRows;\r\n    if (rowStart + newNumberOfRowsToDisplay > totalNumberOfRows) {\r\n      this.rowEnd = totalNumberOfRows - 1;\r\n    } else {\r\n      this.rowEnd = rowStart + newNumberOfRowsToDisplay - 1;\r\n    }\r\n    // console.log('this.rowEnd: ' + this.rowEnd);\r\n    // var visibleRows = this.state.visibleRowsDataData.slice(rowStart, this.rowEnd + 1);\r\n    // rowData.slice(rowStart, this.rowEnd + 1);\r\n    // setPreloadRowStart(rowStart);\r\n    this.rowStart = rowStart;\r\n    if (!validateIoNonnegativeIntegerArray([this.rowStart, this.rowEnd])) {\r\n      throw new Error('Error: row start or end invalid!');\r\n    }\r\n    var newVisibleRows = [];\r\n    for (var i = this.rowStart; i <= this.rowEnd; i++) {\r\n      newVisibleRows.push(i);\r\n    }\r\n    // var newVisibleRows = this.rowStart, this.rowEnd + 1);\r\n    this.setState({\r\n      visibleRows: newVisibleRows\r\n    });\r\n  },\r\n\r\n  // public method\r\n  getVisibleRowsContainerDomNode: function getVisibleRowsContainerDomNode() {\r\n    return ReactDOM.findDOMNode(this.refs.visibleRowsContainer);\r\n  },\r\n\r\n  render: function render() {\r\n    var _this = this;\r\n\r\n    var rowItems = this.state.visibleRows.map(function (i) {\r\n      return _this.props.renderRow(i);\r\n    });\r\n\r\n    var rowHeight = this.currentAverageElementHeight ? this.currentAverageElementHeight : this.props.averageElementHeight;\r\n    this.topSpacerHeight = this.rowStart * rowHeight;\r\n    this.bottomSpacerHeight = (this.props.totalNumberOfRows - 1 - this.rowEnd) * rowHeight;\r\n\r\n    var infiniteContainerStyle = {\r\n      height: this.props.containerHeight,\r\n      overflowY: 'scroll'\r\n    };\r\n\r\n    return React.createElement(\r\n      'div',\r\n      {\r\n        ref: 'infiniteContainer',\r\n        className: this.props.containerClassName,\r\n        style: infiniteContainerStyle,\r\n        onScroll: this.onEditorScroll\r\n      },\r\n      React.createElement('div', { className: 'topSpacer', style: { height: this.topSpacerHeight } }),\r\n      React.createElement(\r\n        'div',\r\n        { ref: 'visibleRowsContainer', className: 'visibleRowsContainer' },\r\n        rowItems\r\n      ),\r\n      React.createElement('div', { ref: 'bottomSpacer', className: 'bottomSpacer', style: { height: this.bottomSpacerHeight } })\r\n    );\r\n  }\r\n});\r\n\r\nmodule.exports = InfiniteScoller;",
    "/*\n\tSelectable paragraph, links are disabled\n*/\nvar React=require(\"react-native\");\nvar {\n  View,Text,StyleSheet,\n  PanResponder,PropTypes\n} =React;\nvar E=React.createElement;\nvar {tokenizer,isTextToken}=require(\"./tokenizer\");\nvar {getTokens,getTokenStyle,getTokenHandler}=require(\"./tokens\");\n/*\n  TODO , \n  remove eventEmitter approach\n\n  selection passed in by props, allow multiple selection.\n\n  send token click event to parent component, \n  let parent component controls the selection (allow multiple selections)\n*/\nvar breakmarkup=require(\"./breakmarkup\");\nvar Paragraph=React.createClass({\n\tpropTypes:{\n\t\tparaStart:PropTypes.number.isRequired,//starting paragraph id\n\t\tparaEnd:PropTypes.number.isRequired, //ending paragraph id\n\t\tpara:PropTypes.number.isRequired,  //paragraph id\n\t\ttrimSelection:PropTypes.func.isRequired,\n\t\tcancelSelection:PropTypes.func.isRequired,\n\t\tonMarkupClick:PropTypes.func,\n\t\teventEmitter:PropTypes.object.isRequired,\n\t\tonSelectionChanged:PropTypes.func\n\t}\n\t,componentDidMount:function(){\n\t\tthis.props.eventEmitter&&this.props.eventEmitter.addListener('adjustSelection', this.adjustSelection);\n\t}\n\t,adjustSelection:function(n){\n\t\tif (this.state.selStart===-1||this.state.selEnd===-1||n===0)return;\n\t\t//-1 move selStart to left for single token selection\n\t\tif (this.state.selStart===this.state.selEnd && this.state.selStart && n<0) {\n\t\t\tthis.setState({selStart:this.state.selStart-1,selEnd:this.state.selEnd-1});\n\t\t} else if (this.state.selEnd+n<this.state.tokens.length && \n\t\t\tthis.state.selEnd+n>=this.state.selStart) { // resize selEnd\n\t\t\tthis.setState({selEnd:this.state.selEnd+n});\n\t\t}\n\t}\n\t,getInitialState:function() {\n\t\tvar res=getTokens.call(this);\n\t\tres.text=this.props.text;\n\t\tres.typedef=this.props.typedef;\n\t\tres.selStart=-1;\n\t\tres.selEnd=-1;\n\t\treturn res;\t}\n\t,selectToken:function(idx){\n\t\tthis.props.selectToken(idx);\n\t}\n\t,shouldComponentUpdate:function(nextProps,nextState){\n\n\t\tvar selectedChanged=this.isParagraphSelected(nextProps) !== this.isParagraphSelected(this.props);\n\t\tif (selectedChanged && this.isParagraphSelected(nextProps)) {\n\t\t\tnextState.selStart=-1;\n\t\t\tnextState.selEnd=-1;//clear token Selection when select again\n\t\t}\n\t\tvar contentChanged=nextProps.markups!==this.props.markups || nextProps.text!==this.props.text;\n\t\tif (selectedChanged||this.isParagraphSelected(nextProps) || contentChanged) {\n\t\t\tvar res=breakmarkup(nextProps.tokenizer||tokenizer,nextProps.text,nextProps.markups,this.isParagraphSelected(nextProps))\n\t\t\t//var res=this.breakTextByMarkup(nextProps.text,nextProps.markups,this.isParagraphSelected(nextProps));\n\t\t\tnextState.tokens=res.tokens||[];\n\t\t\tnextState.tokenOffsets=res.tokenOffsets||[];\n\t\t\tnextState.tokenMarkup=res.tokenMarkups||[];\n\t\t}\n\t\treturn contentChanged||selectedChanged||this.isParagraphSelected(nextProps) || nextState.selStart!==this.state.selStart||nextState.selEnd!==this.state.selEnd;\n\t}\n\t,selectSentence:function(n){\n\t\tvar start=n,end=n;\n\t\twhile (start>-2) {\n\t\t\tif (isTextToken(this.state.tokens[start-1])) start--;\n\t\t\telse break;\n\t\t}\n\n\t\twhile (end<this.state.tokens.length) {\n\t\t\tif (isTextToken(this.state.tokens[end+1])) end++;\n\t\t\telse break;\n\t\t}\n\n\t\tthis.setState({selStart:start,selEnd:end});\n\t}\n\t,onTokenTouchStart:function(n,evt){\n\t\tif (evt.nativeEvent.touches.length==1){\n\t\t\tif (n===this.state.selStart && n==this.state.selEnd) {\n\t\t\t\tthis.selectSentence(n);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.setState({selStart:n,selEnd:n});\n\t\t\tthis.props.trimSelection(this.props.para,true);\n\t\t} else {\n\t\t\tthis.setState({selEnd:n});\n\t\t\tif (this.state.selStart===-1) this.setState({selStart:n});\n\t\t\tthis.props.trimSelection(this.props.para);\n\t\t}\n\t\t\n\t}\n\t,componentDidUpdate:function(prevProps,prevState) {\n\t\tif (prevState.selStart!==this.state.selStart || prevState.selEnd!==this.state.selEnd) {\n\t\t\tthis.props.onSelectionChanged&&this.props.onSelectionChanged(this.state.selStart,this.state.selEnd,prevState.selStart,prevState.selEnd);\n\t\t}\n\t}\n\t,isParagraphSelected:function(props){\n\t\tprops=props||this.props;\n\t\tvar para=this.props.para;\n\t\tif (props.paraStart<0||props.paraEnd<0)return false;\n\t\tif (para>=props.paraStart && para<=props.paraEnd)return true;\n\t\treturn false;\n\t}\n\t,isTokenSelected:function(n,props){\n\t\tprops=props||this.props;\n\t\tvar para=this.props.para;\n\t\tif (props.paraStart<0||props.paraEnd<0)return false;//no selected paragraph\n\t\tif (para<props.paraStart || para>props.paraEnd)return false;//out of range\n\t\tif (para>props.paraStart && para<props.paraEnd)return true;//within range\n\n\t\tvar start=this.state.selStart;\n\t\tvar end=this.state.selEnd;\n\t\tif (end<start && end>-1) {\n\t\t\tvar t=end;\n\t\t\tend=start;\n\t\t\tstart=t;\n\t\t}\n\n\t\tif (para===props.paraEnd && para!==props.paraStart) {\n\t\t\tstart=0;\n\t\t}\n\t\tif (para===props.paraStart && para!==props.paraEnd) {\n\t\t\tend=this.state.tokens.length;\n\t\t}\n\n\t\treturn (n>=start)&&(n<=end);\n\t}\n\t,onTouchStart:function(){\n\t\tif (this.hyperlink_clicked) {\n\t\t\tthis.hyperlink_clicked=false;\n\t\t} else {\n\t\t\tthis.props.onTouchStart.apply(this,arguments);\n\t\t}\n\t}\n\t,renderToken:function(token,idx){\n\t\tvar tokenStyle=getTokenStyle.call(this,idx);\n\t\tvar tokenHandler=getTokenHandler.call(this,idx);\n\n\t\treturn E(Text,{onLayout:this.onTokenLayout,onTouchStart:this.isParagraphSelected()?this.onTokenTouchStart.bind(this,idx):tokenHandler\n\t\t\t,style:this.isTokenSelected(idx)?\n\t\t\t\t[styles.selectedToken,this.props.selectedTextStyle].concat(tokenStyle):tokenStyle \n\t\t\t\t,ref:idx,key:idx},token);\n\t}\n\t,render:function(){\n\t\tif (!this.isParagraphSelected()) {\n\t\t\treturn E(View,{onTouchStart:this.onTouchStart},\n\t\t\t\tE(Text,{style:this.props.textStyle},this.state.tokens.map(this.renderToken)));\n\t\t}\n\t\t\n\t\treturn E(View,{style:{flex:1}},\n\t\t\tE(Text,\t{style:[styles.selectedParagraph,this.props.textStyle,this.props.selectedStyle]},\n\t\t\t\tthis.state.tokens.map(this.renderToken)));\n\t}\n});\nvar styles=StyleSheet.create({\n\tselectedParagraph:{backgroundColor:'rgb(212,232,255'},\n\tselectedToken:{backgroundColor:'rgb(96,176,255)'}\n\n\t//textShadowColor:'yellow',\ttextShadowRadius:6,textShadowOffset:{width:1,height:1}}\n})\nmodule.exports=Paragraph;\n",
    "var React=require(\"react\");\r\nvar E=React.createElement;\r\n\r\nvar isTextToken=require(\"./tokenizer\").isTextToken;\r\nvar getTokens=require(\"./tokens\").getTokens;\r\nvar getTokenStyle=require(\"./tokens\").getTokenStyle;\r\nvar getTokenHandler=require(\"./tokens\").getTokenHandler;\r\n\r\n\r\nvar Paragraph=React.createClass({\r\n\tgetInitialState:function(){\r\n\t\tvar res=getTokens.call(this);\r\n\t\tres.text=this.props.text;\r\n\t\tres.typedef=this.props.typedef;\r\n\t\tres.selStart=-1;\r\n\t\tres.selEnd=-1;\r\n\t\treturn res;\r\n\t}\r\n\t,componentDidMount:function(){\r\n\t\tthis.props.fetchText(this.props.para,function(err,text,row){\r\n\t\t\tvar res=getTokens.call(this,this.props,text);\r\n\t\t\tres.text=text;\r\n\t\t\tthis.setState(res);\r\n\t\t}.bind(this));\r\n\t}\r\n\t,shouldComponentUpdate:function(nextProps){\r\n\t\tif (nextProps.text===this.props.text || nextProps.text===this.state.text)return false;\r\n\t\treturn true;\r\n\t}\r\n\t,onTouchStart:function(e){\r\n\t\tconsole.log('touchstart',e)\r\n\t}\r\n\t,renderToken:function(token,idx){\r\n\t\tvar tokenStyle=getTokenStyle.call(this,idx);\r\n\t\tvar tokenHandler=getTokenHandler.call(this,idx);\r\n\t\t\r\n\t\treturn E(\"span\",{style:tokenStyle,ref:idx,key:idx},token);\r\n\t}\r\n\t,render:function(){\r\n\t\treturn E(\"span\",{key:1,onTouchStart:this.onTouchStart}\r\n\t\t\t,this.state.tokens.map(this.renderToken));\r\n\t}\r\n});\r\n\r\nvar styles={\r\n\tselectedParagraph:{backgroundColor:'rgb(212,232,255'},\r\n\tselectedToken:{backgroundColor:'rgb(96,176,255)'}\r\n};\r\n\r\nmodule.exports=Paragraph;",
    "module.exports={\n\t1:{\n\t 'm1':{s:5,l:2,type:'t1'}\n\t,'m2':{s:10,l:3,type:'t2'}\n\t}\n\t,3:{\n\t 'm3':{s:2,l:5,type:'t3'}\n\t,'m4':{s:4,l:7,type:'t4'}  \n\t}\n};",
    "module.exports=\n[\"金剛般若波羅蜜經\",\n\"如是我聞：一時，佛在舍衛國祇樹給孤獨園，與大比丘眾千二百五十人俱。\",\n\"爾時，世尊食時，著衣持鉢，入舍衛大城乞食。於其城中，次第乞已，還至本處。飯食訖，收衣鉢，洗足已，敷座而坐。\",\n\"時，長老須菩提在大眾中即從座起，偏袒右肩，右膝著地，合掌恭敬而白佛言：\",\n\"「希有！世尊！如來善護念諸菩薩，善付囑諸菩薩。\",\n\"世尊！善男子、善女人，發阿耨多羅三藐三菩提心，應云何住？云何降伏其心？」\",\n\"佛言：「善哉，善哉！須菩提！如汝所說：『如來善護念諸菩薩，善付囑諸菩薩。』\",\n\"汝今諦聽，當為汝說。善男子、善女人，發阿耨多羅三藐三菩提心，應如是住，如是降伏其心。」\",\n\"「唯然。世尊！願樂欲聞。」\",\n\"佛告須菩提：「諸菩薩摩訶薩應如是降伏其心：\",\n\"『所有一切眾生之類，若卵生、若胎生、若濕生、若化生，若有色、若無色，若有想、若無想、若非有想非無想，我皆令入無餘涅槃而滅度之。』如是滅度無量無數無邊眾生，實無眾生得滅度者。\t\",\n\"何以故？須菩提！若菩薩有我相、人相、眾生相、壽者相，即非菩薩。\",\n\"復次，須菩提！菩薩於法，應無所住，行於布施，\",\n\"所謂不住色布施，不住聲香味觸法布施。\",\n\"須菩提！菩薩應如是布施，不住於相。\",\n\"何以故？若菩薩不住相布施，其福德不可思量。\",\n\"「須菩提！於意云何？東方虛空可思量不？」「不也，世尊！」「須菩提！南西北方四維上下虛空可思量不？」「不也，世尊！」\",\n\"須菩提！菩薩無住相布施，福德亦復如是不可思量。\",\n\"須菩提！菩薩但應如所教住。\",\n\"「須菩提！於意云何？可以身相見如來不？」\",\n\"「不也，世尊！不可以身相得見如來。\",\n\"何以故？如來所說身相，即非身相。」\",\n\"佛告須菩提：「凡所有相，皆是虛妄。\",\n\"若見諸相非相，則見如來。」\",\n\"須菩提白佛言：「世尊！頗有眾生，得聞如是言說章句，生實信不？」\",\n\"佛告須菩提：「莫作是說。如來滅後，後五百歲，有持戒修福者，於此章句能生信心，以此為實，\",\n\"當知是人，不於一佛二佛三四五佛而種善根，已於無量千萬佛所種諸善根，\",\n\"聞是章句，乃至一念生淨信者，須菩提！如來悉知悉見，是諸眾生得如是無量福德。\",\n\"何以故？是諸眾生無復我相、人相、眾生相、壽者相、無法相，亦無非法相。\",\n\"何以故？是諸眾生若心取相，則為著我、人、眾生、壽者。若取法相，即著我、人、眾生、壽者。何以故？若取非法相，即著我、人、眾生、壽者，\",\n\"是故不應取法，不應取非法。\",\n\"以是義故，如來常說：『汝等比丘，知我說法，如筏喻者，法尚應捨，何況非法。』\",\n\"「須菩提！於意云何？如來得阿耨多羅三藐三菩提耶？如來有所說法耶？」\",\n\"須菩提言：「如我解佛所說義，無有定法名阿耨多羅三藐三菩提，亦無有定法，如來可說。\",\n\"何以故？如來所說法，皆不可取、不可說、非法、非非法。\",\n\"所以者何？一切賢聖，皆以無為法而有差別。」\",\n\"「須菩提！於意云何？若人滿三千大千世界七寶以用布施，是人所得福德，寧為多不？」\",\n\"須菩提言：「甚多，世尊！何以故？是福德即非福德性，是故如來說福德多。」\",\n\"若復有人，於此經中受持，乃至四句偈等，為他人說，其福勝彼。\",\n\"何以故？須菩提！一切諸佛，及諸佛阿耨多羅三藐三菩提法，皆從此經出。\",\n\"須菩提！所謂佛法者，即非佛法。\",\n\"「須菩提！於意云何？須陀洹能作是念：『我得須陀洹果。』不？」須菩提言：「不也，世尊！何以故？須陀洹名為入流，而無所入，不入色、聲、香、味、觸、法，是名須陀洹。」\",\n\"「須菩提！於意云何？斯陀含能作是念：『我得斯陀含果。』不？」須菩提言：「不也，世尊！何以故？斯陀含名一往來，而實無往來，是名斯陀含。」\",\n\"「須菩提！於意云何？阿那含能作是念：『我得阿那含果。』不？」須菩提言：「不也，世尊！何以故？阿那含名為不來，而實無來，是故名阿那含。」\",\n\"「須菩提！於意云何？阿羅漢能作是念：『我得阿羅漢道。』不？」須菩提言：「不也，世尊！何以故？實無有法名阿羅漢。世尊！若阿羅漢作是念：『我得阿羅漢道。』即為著我、人、眾生、壽者。\",\n\"世尊！佛說我得無諍三昧人中最為第一，是第一離欲阿羅漢。\",\n\"我不作是念：『我是離欲阿羅漢。』\",\n\"世尊！我若作是念：『我得阿羅漢道。』世尊則不說須菩提是樂阿蘭那行者。\",\n\"以須菩提實無所行，而名須菩提是樂阿蘭那行。」\",\n\"佛告須菩提：「於意云何？如來昔在然燈佛所，於法有所得不？」「世尊！如來在然燈佛所，於法實無所得。」\",\n\"「須菩提！於意云何？菩薩莊嚴佛土不？」「不也，世尊！何以故？莊嚴佛土者，則非莊嚴，是名莊嚴。」\",\n\"是故須菩提，諸菩薩摩訶薩應如是生清淨心，不應住色生心，不應住聲、香、味、觸、法生心，應無所住而生其心。\",\n\"「須菩提！譬如有人，身如須彌山王，於意云何？是身為大不？」須菩提言：「甚大，世尊！何以故？佛說非身，是名大身。」\",\n\"「須菩提！如恒河中所有沙數，如是沙等恒河，於意云何？是諸恒河沙寧為多不？」須菩提言：「甚多，世尊！但諸恒河尚多無數，何況其沙。」\",\n\"「須菩提！我今實言告汝。若有善男子、善女人，以七寶滿爾所恒河沙數三千大千世界，以用布施，得福多不？」須菩提言：「甚多，世尊！」\",\n\"佛告須菩提：「若善男子、善女人，於此經中，乃至受持四句偈等，為他人說，而此福德勝前福德。」\",\n\"復次，須菩提！隨說是經，乃至四句偈等，當知此處，一切世間天、人、阿修羅，皆應供養，如佛塔廟，\",\n\"何況有人盡能受持讀誦。\",\n\"須菩提！當知是人成就最上第一希有之法，\",\n\"若是經典所在之處，則為有佛，若尊重弟子。\",\n\"爾時，須菩提白佛言：「世尊！當何名此經？我等云何奉持？」\",\n\"佛告須菩提：「是經名為『金剛般若波羅蜜』。\",\n\"以是名字，汝當奉持。\",\n\"所以者何？\",\n\"須菩提！佛說般若波羅蜜，則非般若波羅蜜。\",\n\"須菩提！於意云何？如來有所說法不？」須菩提白佛言：「世尊！如來無所說。」\",\n\"「須菩提！於意云何？三千大千世界所有微塵是為多不？」須菩提言：「甚多，世尊！」\",\n\"須菩提！諸微塵，如來說非微塵，是名微塵。\",\n\"如來說世界，非世界，是名世界。\",\n\"「須菩提！於意云何？可以三十二相見如來不？」「不也，世尊！不可以三十二相得見如來。何以故？如來說三十二相，即是非相，是名三十二相。」\",\n\"「須菩提！若有善男子、善女人，以恒河沙等身命布施；\",\n\"若復有人，於此經中，乃至受持四句偈等，為他人說，其福甚多。」\",\n\"爾時，須菩提聞說是經，深解義趣，涕淚悲泣，而白佛言：\",\n\"「希有，世尊！佛說如是甚深經典，我從昔來所得慧眼，未曾得聞如是之經。\",\n\"世尊！若復有人得聞是經，信心清淨，則生實相，當知是人，成就第一希有功德。\",\n\"世尊！是實相者，則是非相，是故如來說名實相。\",\n\"世尊！我今得聞如是經典，信解受持不足為難，\",\n\"若當來世，後五百歲，其有眾生，得聞是經，信解受持，是人則為第一希有。\",\n\"何以故？此人無我相、人相、眾生相、壽者相。\",\n\"所以者何？我相即是非相，人相、眾生相、壽者相即是非相。\",\n\"何以故？離一切諸相，則名諸佛。」\",\n\"佛告須菩提：「如是，如是！若復有人，得聞是經，不驚、不怖、不畏，當知是人甚為希有。\",\n\"何以故？須菩提！如來說第一波羅蜜，非第一波羅蜜，是名第一波羅蜜。\",\n\"須菩提！忍辱波羅蜜，如來說非忍辱波羅蜜。\",\n\"何以故？須菩提！如我昔為歌利王割截身體，我於爾時，無我相、無人相、無眾生相、無壽者相。何以故？我於往昔節節支解時，若有我相、人相、眾生相、壽者相，應生瞋恨。\",\n\"須菩提！又念過去於五百世作忍辱仙人，於爾所世，無我相、無人相、無眾生相、無壽者相。\",\n\"是故須菩提！菩薩應離一切相，發阿耨多羅三藐三菩提心，\",\n\"不應住色生心，不應住聲香味觸法生心，應生無所住心。\",\n\"若心有住，則為非住。\",\n\"是故佛說：『菩薩心不應住色布施。』\",\n\"須菩提！菩薩為利益一切眾生，應如是布施。\",\n\"如來說：『一切諸相，即是非相。』又說：『一切眾生，則非眾生。』\",\n\"須菩提！如來是真語者、實語者、如語者、不誑語者、不異語者。\",\n\"須菩提！如來所得法，此法無實無虛。\",\n\"須菩提！若菩薩心住於法而行布施，如人入闇，則無所見；\",\n\"若菩薩心不住法而行布施，如人有目，日光明照，見種種色。\",\n\"須菩提！當來之世，若有善男子、善女人，能於此經受持讀誦，則為如來以佛智慧，悉知是人，悉見是人，皆得成就無量無邊功德。\",\n\"須菩提！若有善男子、善女人，初日分以恒河沙等身布施，中日分復以恒河沙等身布施，後日分亦以恒河沙等身布施，如是無量百千萬億劫以身布施；\",\n\"若復有人，聞此經典，信心不逆，其福勝彼，\",\n\"何況書寫、受持、讀誦、為人解說。\",\n\"須菩提！以要言之，是經有不可思議、不可稱量、無邊功德。\",\n\"如來為發大乘者說，為發最上乘者說。\",\n\"若有人能受持讀誦，廣為人說，如來悉知是人，悉見是人，皆得成就不可量、不可稱、無有邊、不可思議功德，如是人等，則為荷擔如來阿耨多羅三藐三菩提。\",\n\"何以故？須菩提！若樂小法者，著我見、人見、眾生見、壽者見，則於此經，不能聽受讀誦、為人解說。\",\n\"須菩提！在在處處，若有此經，一切世間天、人、阿修羅，所應供養；當知此處，則為是塔，皆應恭敬，作禮圍繞，以諸華香而散其處。\",\n\"復次，須菩提！善男子、善女人，受持讀誦此經，若為人輕賤，是人先世罪業，應墮惡道，\",\n\"以今世人輕賤故，先世罪業則為消滅，當得阿耨多羅三藐三菩提。\",\n\"須菩提！我念過去無量阿僧祇劫，於然燈佛前，得值八百四千萬億那由他諸佛，悉皆供養承事，無空過者；\",\n\"若復有人，於後末世，能受持讀誦此經，所得功德，於我所供養諸佛功德，百分不及一，千萬億分、乃至算數譬喻所不能及。\",\n\"須菩提！若善男子、善女人，於後末世，有受持讀誦此經，所得功德，我若具說者，或有人聞，心則狂亂，狐疑不信。\",\n\"須菩提！當知是經義不可思議，果報亦不可思議。\",\n\"爾時，須菩提白佛言：「世尊！善男子、善女人，發阿耨多羅三藐三菩提心，云何應住？云何降伏其心？」\",\n\"佛告須菩提：「善男子、善女人，發阿耨多羅三藐三菩提者，當生如是心：『我應滅度一切眾生。滅度一切眾生已，而無有一眾生實滅度者。』\",\n\"何以故？須菩提！若菩薩有我相、人相、眾生相、壽者相，則非菩薩。\",\n\"所以者何？須菩提！實無有法發阿耨多羅三藐三菩提者。\",\n\"「須菩提！於意云何？如來於然燈佛所，有法得阿耨多羅三藐三菩提不？」\",\n\"「不也，世尊！如我解佛所說義，佛於然燈佛所，無有法得阿耨多羅三藐三菩提。」\",\n\"佛言：「如是，如是！須菩提！實無有法如來得阿耨多羅三藐三菩提。\",\n\"須菩提！若有法如來得阿耨多羅三藐三菩提者，然燈佛則不與我授記：『汝於來世，當得作佛，號釋迦牟尼。』\",\n\"以實無有法得阿耨多羅三藐三菩提，是故然燈佛與我受記，作是言：『汝於來世，當得作佛，號釋迦牟尼。』\",\n\"何以故？如來者，即諸法如義。\",\n\"若有人言：『如來得阿耨多羅三藐三菩提。』須菩提！實無有法，佛得阿耨多羅三藐三菩提。\",\n\"須菩提！如來所得阿耨多羅三藐三菩提，於是中無實無虛。\",\n\"是故如來說：『一切法皆是佛法。』\",\n\"須菩提！所言一切法者，即非一切法，是故名一切法。\",\n\"須菩提！譬如人身長大。須菩提言：「世尊！如來說人身長大，則為非大身，是名大身。」\",\n\"須菩提！菩薩亦如是。若作是言：『我當滅度無量眾生。』則不名菩薩。\",\n\"何以故？須菩提！實無有法名為菩薩。\",\n\"是故佛說：『一切法無我、無人、無眾生、無壽者。』\",\n\"須菩提！若菩薩作是言：『我當莊嚴佛土。』是不名菩薩。\",\n\"何以故？如來說莊嚴佛土者，即非莊嚴，是名莊嚴。\",\n\"須菩提！若菩薩通達無我法者，如來說名真是菩薩。\",\n\"「須菩提！於意云何？如來有肉眼不？」「如是，世尊！如來有肉眼。」「須菩提！於意云何？如來有天眼不？」「如是，世尊！如來有天眼。」「須菩提！於意云何？如來有慧眼不？」「如是，世尊！如來有慧眼。」「須菩提！於意云何？如來有法眼不？」「如是，世尊！如來有法眼。」「須菩提！於意云何？如來有佛眼不？」「如是，世尊！如來有佛眼。」\",\n\"「須菩提！於意云何？恒河中所有沙，佛說是沙不？」「如是，世尊！如來說是沙。」\",\n\"「須菩提！於意云何？如一恒河中所有沙，有如是等恒河，是諸恒河所有沙數佛世界，如是寧為多不？」「甚多，世尊！」\",\n\"佛告須菩提：「爾所國土中，所有眾生，若干種心，如來悉知。\",\n\"何以故？如來說諸心，皆為非心，是名為心。\",\n\"所以者何？須菩提！過去心不可得，現在心不可得，未來心不可得。」\",\n\"「須菩提！於意云何？若有人滿三千大千世界七寶以用布施，是人以是因緣，得福多不？」「如是，世尊！此人以是因緣，得福甚多。」\",\n\"「須菩提！若福德有實，如來不說得福德多；以福德無故，如來說得福德多。」\",\n\"「須菩提！於意云何？佛可以具足色身見不？」「不也，世尊！如來不應以具足色身見。何以故？如來說具足色身，即非具足色身，是名具足色身。」\",\n\"「須菩提！於意云何？如來可以具足諸相見不？」「不也，世尊！如來不應以具足諸相見。何以故？如來說諸相具足，即非具足，是名諸相具足。」\",\n\"「須菩提！汝勿謂如來作是念：『我當有所說法。』莫作是念，\",\n\"何以故？若人言：『如來有所說法。』即為謗佛，不能解我所說故。\",\n\"須菩提！說法者，無法可說，是名說法。」\",\n\"爾時，慧命須菩提白佛言：「世尊！頗有眾生，於未來世，聞說是法，生信心不？」\",\n\"佛言：「須菩提！彼非眾生，非不眾生。\",\n\"何以故？須菩提！眾生、眾生者，如來說非眾生，是名眾生。」\",\n\"須菩提白佛言：「世尊！佛得阿耨多羅三藐三菩提，為無所得耶？」\",\n\"如是，如是！須菩提！我於阿耨多羅三藐三菩提乃至無有少法可得，是名阿耨多羅三藐三菩提。\",\n\"復次，須菩提！是法平等，無有高下，是名阿耨多羅三藐三菩提；\",\n\"以無我、無人、無眾生、無壽者，修一切善法，則得阿耨多羅三藐三菩提。\",\n\"須菩提！所言善法者，如來說非善法，是名善法。\",\n\"須菩提！若三千大千世界中所有諸須彌山王，如是等七寶聚，有人持用布施；\",\n\"若人以此般若波羅蜜經，乃至四句偈等，受持讀誦、為他人說，於前福德百分不及一，百千萬億分，乃至算數譬喻所不能及。\",\n\"須菩提！於意云何？汝等勿謂如來作是念：『我當度眾生。』須菩提！莫作是念。\",\n\"何以故？實無有眾生如來度者，若有眾生如來度者，如來則有我、人、眾生、壽者。\",\n\"須菩提！如來說：『有我者，則非有我，而凡夫之人以為有我。』須菩提！凡夫者，如來說則非凡夫。\",\n\"「須菩提！於意云何？可以三十二相觀如來不？」須菩提言：「如是，如是！以三十二相觀如來。」\",\n\"佛言：「須菩提！若以三十二相觀如來者，轉輪聖王則是如來。」須菩提白佛言：「世尊！如我解佛所說義，不應以三十二相觀如來。」\",\n\"爾時，世尊而說偈言：「若以色見我，以音聲求我，是人行邪道，不能見如來。」\",\n\"須菩提！汝若作是念：『如來不以具足相故，得阿耨多羅三藐三菩提。』須菩提！莫作是念。如來不以具足相故，得阿耨多羅三藐三菩提。\",\n\"須菩提！汝若作是念：『發阿耨多羅三藐三菩提者，說諸法斷滅相。』莫作是念。何以故？發阿耨多羅三藐三菩提心者，於法不說斷滅相。\",\n\"「須菩提！若菩薩以滿恒河沙等世界七寶布施；\",\n\"若復有人知一切法無我，得成於忍，此菩薩勝前菩薩所得功德。\",\n\"須菩提！以諸菩薩不受福德故。」\",\n\"須菩提白佛言：「世尊！云何菩薩不受福德？」\",\n\"須菩提！菩薩所作福德，不應貪著，是故說不受福德。\",\n\"須菩提！若有人言：『如來若來若去、若坐若臥。』是人不解我所說義。\",\n\"何以故？如來者，無所從來，亦無所去，故名如來。\",\n\"「須菩提！若善男子、善女人，以三千大千世界碎為微塵，於意云何？是微塵眾寧為多不？」\",\n\"「甚多，世尊！何以故？若是微塵眾實有者，佛則不說是微塵眾。\",\n\"所以者何？佛說微塵眾，則非微塵眾，是名微塵眾。\",\n\"世尊！如來所說三千大千世界，則非世界，是名世界。\",\n\"何以故？若世界實有者，則是一合相。如來說一合相，則非一合相，是名一合相。」\",\n\"須菩提！一合相者，則是不可說，但凡夫之人貪著其事。\",\n\"「須菩提！若人言：『佛說我見、人見、眾生見、壽者見。』須菩提！於意云何？是人解我所說義不？」「世尊！是人不解如來所說義。\",\n\"何以故？世尊說我見、人見、眾生見、壽者見，即非我見、人見、眾生見、壽者見，是名我見、人見、眾生見、壽者見。」\",\n\"須菩提！發阿耨多羅三藐三菩提心者，於一切法，應如是知，如是見，如是信解，不生法相。\",\n\"須菩提！所言法相者，如來說即非法相，是名法相。\",\n\"須菩提！若有人以滿無量阿僧祇世界七寶持用布施，\",\n\"若有善男子、善女人，發菩薩心者，持於此經，乃至四句偈等，受持讀誦，為人演說，其福勝彼。\",\n\"云何為人演說？不取於相，如如不動。\",\n\"何以故？「一切有為法，如夢、幻、泡、影，如露亦如電，應作如是觀。」\",\n\"佛說是經已，長老須菩提及諸比丘、比丘尼、優婆塞、優婆夷，一切世間天、人、阿修羅，聞佛所說，皆大歡喜，信受奉行。\"\n]",
    "var typedef={\r\n\tt1:{style:{borderBottom:'1px solid blue',cursor:\"pointer\"} }\r\n\t,t2:{style:{color:'brown'}}\r\n\t,t3:{style:{fontFamily:\"DFKai-SB,標楷體\"}}\r\n\t,t4:{style:{backgroundColor:'yellow'}}\r\n};\r\nmodule.exports=typedef;",
    "/*from ksana-analyzer/tokenizers.js*/\nvar isSpace=function(c) {\n\treturn (c==\" \") ;\n}\nvar isCJK =function(c) {return ((c>=0x3000 && c<=0x9FFF) \n|| (c>=0xD800 && c<0xDC00) || (c>=0xFF00) ) ;}\nvar simple1=function(s) {\n\tif (!s) return {tokens:[],offsets:[]};\n\tvar offset=0;\n\tvar tokens=[],offsets=[];\n\ts=s.replace(/\\r\\n/g,'\\n').replace(/\\r/g,'\\n');\n\tvar arr=s.split('\\n');\n\n\tvar pushtoken=function(t,off) {\n\t\tvar i=0;\n\t\tif (t.charCodeAt(0)>255) {\n\t\t\twhile (i<t.length) {\n\t\t\t\tvar c=t.charCodeAt(i);\n\t\t\t\toffsets.push(off+i);\n\t\t\t\ttokens.push(t[i]);\n\t\t\t\tif (c>=0xD800 && c<=0xDFFF) {\n\t\t\t\t\ttokens[tokens.length-1]+=t[i]; //extension B,C,D\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t} else {\n\t\t\ttokens.push(t);\n\t\t\toffsets.push(off);\t\n\t\t}\n\t}\n\tfor (var i=0;i<arr.length;i++) {\n\t\tvar last=0,sp=\"\";\n\t\tstr=arr[i];\n\t\tstr.replace(/[_0-9A-Za-z]+/g,function(m,m1){\n\t\t\twhile (isSpace(sp=str[last]) && last<str.length) {\n\t\t\t\ttokens[tokens.length-1]+=sp;\n\t\t\t\tlast++;\n\t\t\t}\n\t\t\tpushtoken(str.substring(last,m1)+m , offset+last);\n\t\t\toffsets.push(offset+last);\n\t\t\tlast=m1+m.length;\n\t\t});\n\n\t\tif (last<str.length) {\n\t\t\twhile (isSpace(sp=str[last]) && last<str.length) {\n\t\t\t\ttokens[tokens.length-1]+=sp;\n\t\t\t\tlast++;\n\t\t\t}\n\t\t\tpushtoken(str.substring(last), offset+last);\n\t\t\t\n\t\t}\t\t\n\t\toffsets.push(offset+last);\n\t\toffset+=str.length+1;\n\t\tif (i===arr.length-1) break;\n\t\ttokens.push('\\n');\n\t}\n\n\treturn {tokens:tokens,offsets:offsets};\n\n};\nvar isTextToken=function(token) {\n\tif (!token) return false;\n\tvar t=token.trim();\n\tvar m=t.match(/[a-zA-Z\\u3400-\\u9fff\\ud800-\\udfff]*/);\n\treturn (m && m[0]===t);\n}\nmodule.exports={tokenizer:simple1, isTextToken};",
    "\r\nvar tokenizer=require(\"./tokenizer\").tokenizer;\r\nvar breakmarkup=require(\"./breakmarkup\");\r\n\r\n\r\nvar tokenHandler=function(n,evt){\r\n\tthis.hyperlink_clicked=true; //cancel bubbling to onTouchStart\r\n\tvar M=this.state.tokenMarkups[n];\r\n\tthis.props.onHyperlink&&this.props.onHyperlink(this.props.para,M);\r\n\t//TODO highlight hyperlink\r\n}\r\n\r\nvar getTokenHandler=function(n) {\r\n\tvar M=this.state.tokenMarkups[n];\r\n\tif (!M || !Object.keys(M).length)return null;\r\n\tvar markups=this.props.markups;\r\n\tvar out={},typedef=this.state.typedef;\r\n\r\n\tif (typedef[ markups[M[0]].type]) {\r\n\t\treturn tokenHandler.bind(this,n);\r\n\t} \r\n\treturn null; //onTouchStart\r\n}\r\nvar getTokenStyle=function(n) {\r\n\tvar M=this.state.tokenMarkups[n];\r\n\tif (!M)return null;\r\n\r\n\tvar markups=this.props.markups;\r\n\tvar out={},typedef=this.state.typedef;\r\n\tM.forEach(function(m,idx){\r\n\t\tif (!markups[m])return;\r\n\t\tvar type=markups[m].type;\r\n\t\tif (typedef[type] &&typedef[type].style ) {\r\n\t\t\tout=Object.assign(out,typedef[type].style);\r\n\t\t}\r\n\t});\r\n\r\n\treturn out;\r\n}\r\n\r\nvar getTokens=function(props,text){\r\n\t\tprops=props||this.props;\r\n\t\ttext=text||props.text;\r\n\t\treturn breakmarkup(props.tokenizer||tokenizer,text,props.markups);\r\n}\r\n\r\n\r\nmodule.exports={getTokenStyle:getTokenStyle,\r\n\ttokenHandler:tokenHandler,\r\n\tgetTokenHandler:getTokenHandler,getTokens:getTokens}",
    "\r\nvar userCancel=false;\r\nvar files=[];\r\nvar totalDownloadByte=0;\r\nvar targetPath=\"\";\r\nvar tempPath=\"\";\r\nvar nfile=0;\r\nvar baseurl=\"\";\r\nvar result=\"\";\r\nvar downloading=false;\r\nvar startDownload=function(dbid,_baseurl,_files) { //return download id\r\n\tvar fs     = require(\"fs\");\r\n\tvar path   = require(\"path\");\r\n\r\n\t\r\n\tfiles=_files.split(\"\\uffff\");\r\n\tif (downloading) return false; //only one session\r\n\tuserCancel=false;\r\n\ttotalDownloadByte=0;\r\n\tnextFile();\r\n\tdownloading=true;\r\n\tbaseurl=_baseurl;\r\n\tif (baseurl[baseurl.length-1]!='/')baseurl+='/';\r\n\ttargetPath=ksanagap.rootPath+dbid+'/';\r\n\ttempPath=ksanagap.rootPath+\".tmp/\";\r\n\tresult=\"\";\r\n\treturn true;\r\n}\r\n\r\nvar nextFile=function() {\r\n\tsetTimeout(function(){\r\n\t\tif (nfile==files.length) {\r\n\t\t\tnfile++;\r\n\t\t\tendDownload();\r\n\t\t} else {\r\n\t\t\tdownloadFile(nfile++);\t\r\n\t\t}\r\n\t},100);\r\n}\r\n\r\nvar downloadFile=function(nfile) {\r\n\tvar url=baseurl+files[nfile];\r\n\tvar tmpfilename=tempPath+files[nfile];\r\n\tvar mkdirp = require(\"./mkdirp\");\r\n\tvar fs     = require(\"fs\");\r\n\tvar http   = require(\"http\");\r\n\r\n\tmkdirp.sync(path.dirname(tmpfilename));\r\n\tvar writeStream = fs.createWriteStream(tmpfilename);\r\n\tvar datalength=0;\r\n\tvar request = http.get(url, function(response) {\r\n\t\tresponse.on('data',function(chunk){\r\n\t\t\twriteStream.write(chunk);\r\n\t\t\ttotalDownloadByte+=chunk.length;\r\n\t\t\tif (userCancel) {\r\n\t\t\t\twriteStream.end();\r\n\t\t\t\tsetTimeout(function(){nextFile();},100);\r\n\t\t\t}\r\n\t\t});\r\n\t\tresponse.on(\"end\",function() {\r\n\t\t\twriteStream.end();\r\n\t\t\tsetTimeout(function(){nextFile();},100);\r\n\t\t});\r\n\t});\r\n}\r\n\r\nvar cancelDownload=function() {\r\n\tuserCancel=true;\r\n\tendDownload();\r\n}\r\nvar verify=function() {\r\n\treturn true;\r\n}\r\nvar endDownload=function() {\r\n\tnfile=files.length+1;//stop\r\n\tresult=\"cancelled\";\r\n\tdownloading=false;\r\n\tif (userCancel) return;\r\n\tvar fs     = require(\"fs\");\r\n\tvar mkdirp = require(\"./mkdirp\");\r\n\r\n\tfor (var i=0;i<files.length;i++) {\r\n\t\tvar targetfilename=targetPath+files[i];\r\n\t\tvar tmpfilename   =tempPath+files[i];\r\n\t\tmkdirp.sync(path.dirname(targetfilename));\r\n\t\tfs.renameSync(tmpfilename,targetfilename);\r\n\t}\r\n\tif (verify()) {\r\n\t\tresult=\"success\";\r\n\t} else {\r\n\t\tresult=\"error\";\r\n\t}\r\n}\r\n\r\nvar downloadedByte=function() {\r\n\treturn totalDownloadByte;\r\n}\r\nvar doneDownload=function() {\r\n\tif (nfile>files.length) return result;\r\n\telse return \"\";\r\n}\r\nvar downloadingFile=function() {\r\n\treturn nfile-1;\r\n}\r\n\r\nvar downloader={startDownload:startDownload, downloadedByte:downloadedByte,\r\n\tdownloadingFile:downloadingFile, cancelDownload:cancelDownload,doneDownload:doneDownload};\r\nmodule.exports=downloader;",
    "/* emulate filesystem on html5 browser */\r\nvar get_head=function(url,field,cb){\r\n\tvar xhr = new XMLHttpRequest();\r\n\txhr.open(\"HEAD\", url, true);\r\n\txhr.onreadystatechange = function() {\r\n\t\t\tif (this.readyState == this.DONE) {\r\n\t\t\t\tcb(xhr.getResponseHeader(field));\r\n\t\t\t} else {\r\n\t\t\t\tif (this.status!==200&&this.status!==206) {\r\n\t\t\t\t\tcb(\"\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t};\r\n\txhr.send();\r\n}\r\nvar get_date=function(url,cb) {\r\n\tget_head(url,\"Last-Modified\",function(value){\r\n\t\tcb(value);\r\n\t});\r\n}\r\nvar get_size=function(url, cb) {\r\n\tget_head(url,\"Content-Length\",function(value){\r\n\t\tcb(parseInt(value));\r\n\t});\r\n};\r\nvar checkUpdate=function(url,fn,cb) {\r\n\tif (!url) {\r\n\t\tcb(false);\r\n\t\treturn;\r\n\t}\r\n\tget_date(url,function(d){\r\n\t\tAPI.fs.root.getFile(fn, {create: false, exclusive: false}, function(fileEntry) {\r\n\t\t\tfileEntry.getMetadata(function(metadata){\r\n\t\t\t\tvar localDate=Date.parse(metadata.modificationTime);\r\n\t\t\t\tvar urlDate=Date.parse(d);\r\n\t\t\t\tcb(urlDate>localDate);\r\n\t\t\t});\r\n\t\t},function(){\r\n\t\t\tcb(false);\r\n\t\t});\r\n\t});\r\n}\r\nvar download=function(url,fn,cb,statuscb,context) {\r\n\t var totalsize=0,batches=null,written=0;\r\n\t var fileEntry=0, fileWriter=0;\r\n\t var createBatches=function(size) {\r\n\t\tvar bytes=1024*1024, out=[];\r\n\t\tvar b=Math.floor(size / bytes);\r\n\t\tvar last=size %bytes;\r\n\t\tfor (var i=0;i<=b;i++) {\r\n\t\t\tout.push(i*bytes);\r\n\t\t}\r\n\t\tout.push(b*bytes+last);\r\n\t\treturn out;\r\n\t }\r\n\t var finish=function() {\r\n\t\t rm(fn,function(){\r\n\t\t\t\tfileEntry.moveTo(fileEntry.filesystem.root, fn,function(){\r\n\t\t\t\t\tsetTimeout( cb.bind(context,false) , 0) ;\r\n\t\t\t\t},function(e){\r\n\t\t\t\t\tconsole.log(\"failed\",e)\r\n\t\t\t\t});\r\n\t\t },this);\r\n\t };\r\n\t\tvar tempfn=\"temp.kdb\";\r\n\t\tvar batch=function(b) {\r\n\t\tvar abort=false;\r\n\t\tvar xhr = new XMLHttpRequest();\r\n\t\tvar requesturl=url+\"?\"+Math.random();\r\n\t\txhr.open('get', requesturl, true);\r\n\t\txhr.setRequestHeader('Range', 'bytes='+batches[b]+'-'+(batches[b+1]-1));\r\n\t\txhr.responseType = 'blob';\r\n\t\txhr.addEventListener('load', function() {\r\n\t\t\tvar blob=this.response;\r\n\t\t\tfileEntry.createWriter(function(fileWriter) {\r\n\t\t\t\tfileWriter.seek(fileWriter.length);\r\n\t\t\t\tfileWriter.write(blob);\r\n\t\t\t\twritten+=blob.size;\r\n\t\t\t\tfileWriter.onwriteend = function(e) {\r\n\t\t\t\t\tif (statuscb) {\r\n\t\t\t\t\t\tabort=statuscb.apply(context,[ fileWriter.length / totalsize,totalsize ]);\r\n\t\t\t\t\t\tif (abort) setTimeout( cb.bind(context,false) , 0) ;\r\n\t\t\t\t \t}\r\n\t\t\t\t\tb++;\r\n\t\t\t\t\tif (!abort) {\r\n\t\t\t\t\t\tif (b<batches.length-1) setTimeout(batch.bind(context,b),0);\r\n\t\t\t\t\t\telse                    finish();\r\n\t\t\t\t \t}\r\n\t\t\t \t};\r\n\t\t\t}, console.error);\r\n\t\t},false);\r\n\t\txhr.send();\r\n\t}\r\n\r\n\tget_size(url,function(size){\r\n\t\ttotalsize=size;\r\n\t\tif (!size) {\r\n\t\t\tif (cb) cb.apply(context,[false]);\r\n\t\t} else {//ready to download\r\n\t\t\trm(tempfn,function(){\r\n\t\t\t\t batches=createBatches(size);\r\n\t\t\t\t if (statuscb) statuscb.apply(context,[ 0, totalsize ]);\r\n\t\t\t\t API.fs.root.getFile(tempfn, {create: 1, exclusive: false}, function(_fileEntry) {\r\n\t\t\t\t\t\t\tfileEntry=_fileEntry;\r\n\t\t\t\t\t\tbatch(0);\r\n\t\t\t\t });\r\n\t\t\t},this);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nvar readFile=function(filename,cb,context) {\r\n\tAPI.fs.root.getFile(filename, {create: false, exclusive: false},function(fileEntry) {\r\n\t\tfileEntry.file(function(file){\r\n\t\t\tvar reader = new FileReader();\r\n\t\t\treader.onloadend = function(e) {\r\n\t\t\t\tif (cb) cb.call(cb,this.result);\r\n\t\t\t};\r\n\t\t\treader.readAsText(file,\"utf8\");\r\n\t\t});\r\n\t}, console.error);\r\n}\r\n\r\nfunction createDir(rootDirEntry, folders,  cb) {\r\n  // Throw out './' or '/' and move on to prevent something like '/foo/.//bar'.\r\n  if (folders[0] == '.' || folders[0] == '') {\r\n    folders = folders.slice(1);\r\n  }\r\n  rootDirEntry.getDirectory(folders[0], {create: true}, function(dirEntry) {\r\n    // Recursively add the new subfolder (if we still have another to create).\r\n    if (folders.length) {\r\n      createDir(dirEntry, folders.slice(1),cb);\r\n    } else {\r\n\t\t\tcb();\r\n\t\t}\r\n  }, cb);\r\n};\r\n\r\n\r\nvar writeFile=function(filename,buf,cb,context){\r\n\tvar write=function(fileEntry){\r\n\t\tfileEntry.createWriter(function(fileWriter) {\r\n\t\t\tfileWriter.write(buf);\r\n\t\t\tfileWriter.onwriteend = function(e) {\r\n\t\t\t\tif (cb) cb.apply(cb,[buf.byteLength]);\r\n\t\t\t};\r\n\t\t}, console.error);\r\n\t}\r\n\r\n\tvar getFile=function(filename){\r\n\t\tAPI.fs.root.getFile(filename, {exclusive:true}, function(fileEntry) {\r\n\t\t\twrite(fileEntry);\r\n\t\t}, function(){\r\n\t\t\t\tAPI.fs.root.getFile(filename, {create:true,exclusive:true}, function(fileEntry) {\r\n\t\t\t\t\twrite(fileEntry);\r\n\t\t\t\t});\r\n\r\n\t\t});\r\n\t}\r\n\tvar slash=filename.lastIndexOf(\"/\");\r\n\tif (slash>-1) {\r\n\t\tcreateDir(API.fs.root, filename.substr(0,slash).split(\"/\"),function(){\r\n\t\t\tgetFile(filename);\r\n\t\t});\r\n\t} else {\r\n\t\tgetFile(filename);\r\n\t}\r\n}\r\n\r\nvar readdir=function(cb,context) {\r\n\tvar dirReader = API.fs.root.createReader();\r\n\tvar out=[],that=this;\r\n\tdirReader.readEntries(function(entries) {\r\n\t\tif (entries.length) {\r\n\t\t\tfor (var i = 0, entry; entry = entries[i]; ++i) {\r\n\t\t\t\tif (entry.isFile) {\r\n\t\t\t\t\tout.push([entry.name,entry.toURL ? entry.toURL() : entry.toURI()]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tAPI.files=out;\r\n\t\tif (cb) cb.apply(context,[out]);\r\n\t}, function(){\r\n\t\tif (cb) cb.apply(context,[null]);\r\n\t});\r\n}\r\nvar getFileURL=function(filename) {\r\n\tif (!API.files ) return null;\r\n\tvar file= API.files.filter(function(f){return f[0]==filename});\r\n\tif (file.length) return file[0][1];\r\n}\r\nvar rm=function(filename,cb,context) {\r\n\tvar url=getFileURL(filename);\r\n\tif (url) rmURL(url,cb,context);\r\n\telse if (cb) cb.apply(context,[false]);\r\n}\r\n\r\nvar rmURL=function(filename,cb,context) {\r\n\twebkitResolveLocalFileSystemURL(filename, function(fileEntry) {\r\n\t\tfileEntry.remove(function() {\r\n\t\t\tif (cb) cb.apply(context,[true]);\r\n\t\t}, console.error);\r\n\t},  function(e){\r\n\t\tif (cb) cb.apply(context,[false]);//no such file\r\n\t});\r\n}\r\nfunction errorHandler(e) {\r\n\tconsole.error('Error: ' +e.name+ \" \"+e.message);\r\n}\r\nvar initfs=function(grantedBytes,cb,context) {\r\n\twebkitRequestFileSystem(PERSISTENT, grantedBytes,  function(fs) {\r\n\t\tAPI.fs=fs;\r\n\t\tAPI.quota=grantedBytes;\r\n\t\treaddir(function(){\r\n\t\t\tAPI.initialized=true;\r\n\t\t\tcb.apply(context,[grantedBytes,fs]);\r\n\t\t},context);\r\n\t}, errorHandler);\r\n}\r\nvar init=function(quota,cb,context) {\r\n\tif (!navigator.webkitPersistentStorage) return;\r\n\tnavigator.webkitPersistentStorage.requestQuota(quota,\r\n\t\t\tfunction(grantedBytes) {\r\n\t\t\t\tinitfs(grantedBytes,cb,context);\r\n\t\t}, errorHandler\r\n\t);\r\n}\r\nvar queryQuota=function(cb,context) {\r\n\tvar that=this;\r\n\tnavigator.webkitPersistentStorage.queryUsageAndQuota(\r\n\t function(usage,quota){\r\n\t\t\tinitfs(quota,function(){\r\n\t\t\t\tcb.apply(context,[usage,quota]);\r\n\t\t\t},context);\r\n\t});\r\n}\r\nvar API={\r\n\tinit:init\r\n\t,readdir:readdir\r\n\t,checkUpdate:checkUpdate\r\n\t,rm:rm\r\n\t,rmURL:rmURL\r\n\t,getFileURL:getFileURL\r\n\t,writeFile:writeFile\r\n\t,readFile:readFile\r\n\t,download:download\r\n\t,get_head:get_head\r\n\t,get_date:get_date\r\n\t,get_size:get_size\r\n\t,getDownloadSize:get_size\r\n\t,queryQuota:queryQuota\r\n}\r\nmodule.exports=API;\r\n",
    "var appname=\"installer\";\r\nif (typeof ksana==\"undefined\") {\r\n\twindow.ksana={platform:\"chrome\"};\r\n\tif (typeof process!==\"undefined\" && \r\n\t\tprocess.versions && process.versions[\"node-webkit\"]) {\r\n\t\twindow.ksana.platform=\"node-webkit\";\r\n\t}\r\n}\r\nvar switchApp=function(path) {\r\n\tvar fs=require(\"fs\");\r\n\tpath=\"../\"+path;\r\n\tappname=path;\r\n\tdocument.location.href= path+\"/index.html\"; \r\n\tprocess.chdir(path);\r\n}\r\nvar downloader={};\r\nvar rootPath=\"\";\r\n\r\nvar deleteApp=function(app) {\r\n\tconsole.error(\"not allow on PC, do it in File Explorer/ Finder\");\r\n}\r\nvar username=function() {\r\n\treturn \"\";\r\n}\r\nvar useremail=function() {\r\n\treturn \"\"\r\n}\r\nvar runtime_version=function() {\r\n\treturn \"1.4\";\r\n}\r\n\r\n//copy from liveupdate\r\nvar jsonp=function(url,dbid,callback,context) {\r\n  var script=document.getElementById(\"jsonp2\");\r\n  if (script) {\r\n    script.parentNode.removeChild(script);\r\n  }\r\n  window.jsonp_handler=function(data) {\r\n    if (typeof data==\"object\") {\r\n      data.dbid=dbid;\r\n      callback.apply(context,[data]);    \r\n    }  \r\n  }\r\n  window.jsonp_error_handler=function() {\r\n    console.error(\"url unreachable\",url);\r\n    callback.apply(context,[null]);\r\n  }\r\n  script=document.createElement('script');\r\n  script.setAttribute('id', \"jsonp2\");\r\n  script.setAttribute('onerror', \"jsonp_error_handler()\");\r\n  url=url+'?'+(new Date().getTime());\r\n  script.setAttribute('src', url);\r\n  document.getElementsByTagName('head')[0].appendChild(script); \r\n}\r\n\r\n\r\nvar loadKsanajs=function(){\r\n\r\n\tif (typeof process!=\"undefined\" && !process.browser) {\r\n\t\tvar ksanajs=require(\"fs\").readFileSync(\"./ksana.js\",\"utf8\").trim();\r\n\t\tdownloader=require(\"./downloader\");\r\n\t\tksana.js=JSON.parse(ksanajs.substring(14,ksanajs.length-1));\r\n\t\trootPath=process.cwd();\r\n\t\trootPath=require(\"path\").resolve(rootPath,\"..\").replace(/\\\\/g,\"/\")+'/';\r\n\t\tksana.ready=true;\r\n\t} else{\r\n\t\tvar url=window.location.origin+window.location.pathname.replace(\"index.html\",\"\")+\"ksana.js\";\r\n\t\tjsonp(url,appname,function(data){\r\n\t\t\tksana.js=data;\r\n\t\t\tksana.ready=true;\r\n\t\t});\r\n\t}\r\n}\r\n\r\nloadKsanajs();\r\n\r\nvar boot=function(appId,cb) {\r\n\tif (typeof appId==\"function\") {\r\n\t\tcb=appId;\r\n\t\tappId=\"unknownapp\";\r\n\t}\r\n\tif (!ksana.js && ksana.platform==\"node-webkit\") {\r\n\t\tloadKsanajs();\r\n\t}\r\n\tksana.appId=appId;\r\n\tif (ksana.ready) {\r\n\t\tcb();\r\n\t\treturn;\r\n\t}\r\n\tvar timer=setInterval(function(){\r\n\t\t\tif (ksana.ready){\r\n\t\t\t\tclearInterval(timer);\r\n\t\t\t\tcb();\r\n\t\t\t}\r\n\t\t},100);\r\n}\r\n\r\n\r\nvar ksanagap={\r\n\tplatform:\"node-webkit\",\r\n\tstartDownload:downloader.startDownload,\r\n\tdownloadedByte:downloader.downloadedByte,\r\n\tdownloadingFile:downloader.downloadingFile,\r\n\tcancelDownload:downloader.cancelDownload,\r\n\tdoneDownload:downloader.doneDownload,\r\n\tswitchApp:switchApp,\r\n\trootPath:rootPath,\r\n\tdeleteApp: deleteApp,\r\n\tusername:username, //not support on PC\r\n\tuseremail:username,\r\n\truntime_version:runtime_version,\r\n\tboot:boot\r\n}\r\nmodule.exports=ksanagap;",
    "var started=false;\r\nvar timer=null;\r\nvar bundledate=null;\r\nvar get_date=require(\"./html5fs\").get_date;\r\nvar checkIfBundleUpdated=function() {\r\n\tget_date(\"bundle.js\",function(date){\r\n\t\tif (bundledate &&bundledate!=date){\r\n\t\t\tlocation.reload();\r\n\t\t}\r\n\t\tbundledate=date;\r\n\t});\r\n}\r\nvar livereload=function() {\r\n\tif(window.location.origin.indexOf(\"//127.0.0.1\")===-1) return;\r\n\r\n\tif (started) return;\r\n\r\n\ttimer1=setInterval(function(){\r\n\t\tcheckIfBundleUpdated();\r\n\t},2000);\r\n\tstarted=true;\r\n}\r\n\r\nmodule.exports=livereload;",
    "function mkdirP (p, mode, f, made) {\r\n     var path = nodeRequire('path');\r\n     var fs = nodeRequire('fs');\r\n\t\r\n    if (typeof mode === 'function' || mode === undefined) {\r\n        f = mode;\r\n        mode = 0x1FF & (~process.umask());\r\n    }\r\n    if (!made) made = null;\r\n\r\n    var cb = f || function () {};\r\n    if (typeof mode === 'string') mode = parseInt(mode, 8);\r\n    p = path.resolve(p);\r\n\r\n    fs.mkdir(p, mode, function (er) {\r\n        if (!er) {\r\n            made = made || p;\r\n            return cb(null, made);\r\n        }\r\n        switch (er.code) {\r\n            case 'ENOENT':\r\n                mkdirP(path.dirname(p), mode, function (er, made) {\r\n                    if (er) cb(er, made);\r\n                    else mkdirP(p, mode, cb, made);\r\n                });\r\n                break;\r\n\r\n            // In the case of any other error, just see if there's a dir\r\n            // there already.  If so, then hooray!  If not, then something\r\n            // is borked.\r\n            default:\r\n                fs.stat(p, function (er2, stat) {\r\n                    // if the stat fails, then that's super weird.\r\n                    // let the original error be the failure reason.\r\n                    if (er2 || !stat.isDirectory()) cb(er, made)\r\n                    else cb(null, made);\r\n                });\r\n                break;\r\n        }\r\n    });\r\n}\r\n\r\nmkdirP.sync = function sync (p, mode, made) {\r\n    var path = nodeRequire('path');\r\n    var fs = nodeRequire('fs');\r\n    if (mode === undefined) {\r\n        mode = 0x1FF & (~process.umask());\r\n    }\r\n    if (!made) made = null;\r\n\r\n    if (typeof mode === 'string') mode = parseInt(mode, 8);\r\n    p = path.resolve(p);\r\n\r\n    try {\r\n        fs.mkdirSync(p, mode);\r\n        made = made || p;\r\n    }\r\n    catch (err0) {\r\n        switch (err0.code) {\r\n            case 'ENOENT' :\r\n                made = sync(path.dirname(p), mode, made);\r\n                sync(p, mode, made);\r\n                break;\r\n\r\n            // In the case of any other error, just see if there's a dir\r\n            // there already.  If so, then hooray!  If not, then something\r\n            // is borked.\r\n            default:\r\n                var stat;\r\n                try {\r\n                    stat = fs.statSync(p);\r\n                }\r\n                catch (err1) {\r\n                    throw err0;\r\n                }\r\n                if (!stat.isDirectory()) throw err0;\r\n                break;\r\n        }\r\n    }\r\n\r\n    return made;\r\n};\r\n\r\nmodule.exports = mkdirP.mkdirp = mkdirP.mkdirP = mkdirP;\r\n",
    "var React=require(\"react\");\r\nvar ReactDOM=require(\"react-dom\");\r\nrequire(\"ksana2015-webruntime/livereload\")(); \r\nvar ksanagap=require(\"ksana2015-webruntime/ksanagap\");\r\nksanagap.boot(\"selectable-richtext-test\",function(){\r\n\tvar Main=React.createElement(require(\"./src/main.jsx\"));\r\n\tksana.mainComponent=ReactDOM.render(Main,document.getElementById(\"main\"));\r\n});",
    "var React=require(\"react\");\r\nvar E=React.createElement;\r\nvar SRT=require(\"./selectable_richtext_test\");\r\nvar maincomponent = React.createClass({displayName: \"maincomponent\",\r\n  getInitialState:function() {\r\n    return {};\r\n  },\r\n  render: function() {\r\n    return React.createElement(SRT, null); \r\n  }\r\n});\r\nmodule.exports=maincomponent;",
    "var React=require(\"react\");\r\nvar E=React.createElement;\r\n\r\nvar MarkupMenu=React.createClass({displayName: \"MarkupMenu\",\r\n\trender:function(){\r\n\t\treturn E(\"span\",null,\"menu\");\r\n\t}\r\n})\r\nmodule.exports=MarkupMenu;",
    "var React=require(\"react\");\r\n\r\nvar E=React.createElement;\r\nvar SelectableRichText=require(\"ksana-selectable-richtext\").SelectableRichText;\r\n\r\nvar sampletext=require(\"ksana-selectable-richtext/sampledata/text\").map(function(t){return {rawtext:t}});\r\nvar samplemarkup=require(\"ksana-selectable-richtext/sampledata/markups\");\r\nvar sampletypedef=require(\"ksana-selectable-richtext/sampledata/typedef_web\");\r\nvar MarkupMenu=require(\"./markupmenu\");\r\n\r\nvar selectable_richtext_test=React.createClass({displayName: \"selectable_richtext_test\",\r\n  getInitialState:function(){\r\n    return {};\r\n  }\r\n  ,markLeft:function(){\r\n    this.refs.srt.markLeft();\r\n  }\r\n  ,markRight:function(){\r\n    this.refs.srt.markRight();\r\n  }\r\n  ,onMarkup:function(type){\r\n    var sel=this.refs.srt.getSelection();\r\n    if (sel.paraStart===-1||sel.paraEnd===-1) return; //no selected paragraph\r\n    if (sel.selStart===-1||sel.selEnd===-1)return;//no selection\r\n    if (sel.paraStart!==sel.paraEnd)return;//only single paragraph selection is supported\r\n    \r\n    if (!samplemarkup[sel.paraStart]) samplemarkup[sel.paraStart]={};\r\n    var mid='m'+Math.round(Math.random()*1000000);\r\n    samplemarkup[sel.paraStart][mid]={s:sel.selStart,l:sel.selEnd-sel.selStart+1,type:type}\r\n    this.refs.srt.cancelSelection();\r\n  }\r\n  ,onFetchText:function(row,cb) {\r\n    sampletext[row].text=sampletext[row].rawtext;\r\n    cb(0,sampletext[row].text,row);\r\n  }\r\n  ,onHyperlink:function(para,mid) {\r\n    console.log(mid.map((m)=>{return {mid:m,obj:samplemarkup[para][m]}}))\r\n  }\r\n  ,render:function(){\r\n    return  E(\"div\",{style:{flex:1}},\r\n              E(MarkupMenu,{onMarkup:this.onMarkup,typedef:sampletypedef\r\n                ,markLeft:this.markLeft,markRight:this.markRight}),\r\n              E(SelectableRichText,{ref:\"srt\",rows:sampletext \r\n              ,textStyle:styles.textStyle\r\n              ,onHyperlink:this.onHyperlink\r\n              ,selectedStyle:styles.selectedStyle\r\n              ,selectedTextStyle:styles.selectedTextStyle\r\n              ,markups:samplemarkup\r\n              ,typedef:sampletypedef\r\n              ,onFetchText:this.onFetchText})\r\n    );\r\n  }\r\n});\r\n\r\nvar styles={\r\n  textStyle:{fontSize:28},\r\n  selectedStyle:{},\r\n  selectedTextStyle:{}\r\n};\r\nmodule.exports=selectable_richtext_test;"
  ]
}